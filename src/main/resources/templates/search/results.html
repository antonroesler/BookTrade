<!DOCTYPE html>
<html lang="de" dir="ltr">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="../css/styles.css">
	<link rel="stylesheet" type="text/css" href="../../static/css/styles.css">
	<title>BücherHändler</title>
</head>

<body>


	<!-- NavBar -->

	<nav id="header-navbar">

		<div class="flex-container">

			<form th:action="@{/back}" th:object="${userHashForm}" method="GET">
						<input type="hidden" th:value="*{user}" th:field="*{user}"/>
						<button type="submit">Zurück zur Übersicht</button>
					</form>


		</div>
	</nav>

	<section id="search-results-section">

		<div class="container" id="my-books-title">
			<div class="row">

				<ul class="row">
					<li th:each="book: ${bookList}">
						<div class="book-card">
							<p class="book-card-title" th:utext="${book.shortTitle}">...</p>
							<p class="book-card-text" th:utext="${book.autor}">...</p>

							<div class="card-bottom">

								<div th:attr="onclick='add(\'' + ${book.id}+  '\');'" class="icon">
									<img src="../icons/add.png" alt="Add Icon">
								</div>
								<div  class="icon">
									<form th:action="@{/bookView}" th:object="${userHashForm}" method="GET">
									<input type="hidden" th:value="*{user}" th:field="*{user}"/>
									<input type="hidden" th:value="${book.id}" th:attr="name='bookId'"/>
									<input type="image" src="../icons/view.png" alt="View Icon"/>
									</form>
								</div>
								<div class="icon">
									<img src="../icons/more.png" alt="More Icon">
								</div>

							</div>
						</div>
					</li>

				</ul>

			</div>
		</div>

	</section>
<script type="text/javascript">
	function add1(id){

		var url_string = window.location.href
		var url = new URL(url_string);
		var user = url.searchParams.get("user");
	}
	function add(id){

		var url_string = window.location.href
		var url = new URL(url_string);
		var user = url.searchParams.get("user");


			var infoForm = {};
		  var contentType = 'application/json; charset=utf-8';
		  infoForm.bookId = id;
			console.log(id)
			console.log(user)
			infoForm.user = user;
		  json = JSON.stringify(infoForm);
		  console.log(json)
		  var url = "http://127.0.0.1:8080/search/results";
		  var xmlhttp = new XMLHttpRequest();
		  xmlhttp.open("POST", url, true);
		  xmlhttp.setRequestHeader('Content-type', contentType);
		  xmlhttp.send(json);

	}


</script>

</body>

</html>
